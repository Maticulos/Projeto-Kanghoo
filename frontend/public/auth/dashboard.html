<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Kanghoo</title>
    <link rel="stylesheet" href="../assets/css/bundle.min.css">
</head>
<body class="form-page">
    <main class="form-container">
        <h1 id="welcome-message">Carregando...</h1>
        <p>Você está em uma área segura da aplicação.</p>
        <div class="botoes-acao" style="justify-content: center; margin-top: 2rem;">
            <button id="logout-button" class="btn btn-logout">Sair (Logout)</button>
        </div>
    </main>

    <script>
document.addEventListener('DOMContentLoaded', () => {
    const token = localStorage.getItem('authToken');

    if (!token) {
        window.location.href = 'login.html';
        return;
    }

    try {
        const payload = JSON.parse(atob(token.split('.')[1]));
        
        if (payload.tipo === 'motorista_escolar') {
            window.location.href = 'area-motorista-escolar-melhorada.html';
        } else if (payload.tipo === 'motorista_excursao') {
            window.location.href = 'area-motorista-excursao.html';
        } else {
            // Fallback, caso precise da área do responsável no futuro
            // window.location.href = 'area-responsavel.html';
            alert('Tipo de usuário não reconhecido!');
            localStorage.removeItem('authToken');
            window.location.href = 'login.html';
        }

    } catch (error) {
        console.error('Erro ao decodificar token ou redirecionar:', error);
        localStorage.removeItem('authToken');
        window.location.href = 'login.html';
    }
});
    </script>
    
    <!-- Script para forçar tema claro -->
    <script>
        // Força o tema claro para garantir visibilidade adequada
        document.documentElement.setAttribute('data-theme', 'light');
        document.body.classList.remove('dark-theme');
        document.body.classList.add('light-theme');
    </script>
</body>
</html>